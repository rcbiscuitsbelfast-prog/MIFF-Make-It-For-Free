const fs = require('fs');

function assert(cond, msg){
	if(!cond){
		throw new Error(msg);
	}
}

// Validate orchestration.json structure (as generated by miff/scripts/gen-manifests.js)
const orchPath = './orchestration.json';
assert(fs.existsSync(orchPath), 'Missing orchestration.json');
const orch = JSON.parse(fs.readFileSync(orchPath, 'utf8'));
assert(Array.isArray(orch.entries), 'orchestration.json: entries[] missing');
assert(orch.entries.length > 0, 'orchestration.json: entries[] empty');

// Validate scenario registry presence
const registryPath = './scenarios/scenario_registry.json';
assert(fs.existsSync(registryPath), 'Missing scenarios/scenario_registry.json');
const registry = JSON.parse(fs.readFileSync(registryPath, 'utf8'));
assert(Array.isArray(registry.scenarios), 'scenario_registry.json: scenarios[] missing');

console.log('âœ… Orchestration and registry validated');
